Bootstrap: debootstrap
OSVersion: bionic
MirrorURL: http://mirrors.ukfast.co.uk/sites/archive.ubuntu.com/

%environment
  PATH=/usr/local/bin:$PATH

%post
    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8
    echo 'export LC_ALL=C.UTF-8' >> $SINGULARITY_ENVIRONMENT
    echo 'export LANG=C.UTF-8' >> $SINGULARITY_ENVIRONMENT
    apt-get update
    apt-get install -y --no-install-recommends apt-utils
    apt-get update
    apt-get install -y software-properties-common
    apt-add-repository universe
    apt-get update
    apt-get install -y python3 bwa mummer python3-pip zlib1g-dev git wget build-essential libbz2-dev liblzma-dev r-base
    pip3 install snakemake networkx biopython pysam pandas
    cd /perfect_single_genome_caller_in_a_pangenome
    Rscript scripts/install.R